# Measurement of Security and Privacy Risks in the Free Live Streaming Ecosystem

This repository contains the code and data collection pipeline for the research paper, "An In-Depth Measurement of Security and Privacy Risks in the Free Live Streaming Ecosystem". This project performs an analysis of the Free Live Streaming (FLS) ecosystem across two major sporting events: UEFA Champions League (UCL) playoffs and NHL Stanley Cup Playoffs, 2024â€“2025 season.

## Repository Structure

-   **/config**: Contains JSON files with seed URLs for aggregator websites for each event.
-   **/data**: Stores the SQLite database (`fls_data.db`) generated by the scripts. 
-   **/scripts**: Main executable scripts for running the research pipeline in stages.
-   **/src/fls_analyzer**: Core Python package containing all the logic for scraping, analysis, and database handling.

## Setup and Installation

### Prerequisites

-   Python 3.8 or higher
-   Google Chrome browser installed (for Selenium)

### Steps

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/Keshvadi/fls.git
    cd fls
    ```

2.  **Install Python dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Set up environment variables:**
    This project requires a VirusTotal API key to analyze URLs. Create a file named `.env` in the root of the project directory and add your key:
    ```
    # .env
    VIRUSTOTAL_API_KEY="your_virustotal_api_key_here"
    ```

4.  **Initialize the database:**
    Before running any scripts, you need to create and initialize the SQLite database. Run the database handler directly:
    ```bash
    python src/fls/db_handler.py
    ```
    This will create the `data/fls_data.db` file and pre-populate the `events` table.

## Running the Research Pipeline

The data collection and analysis process is broken into sequential scripts. They should be run in the following order using the provided Makefile for convenience.

```bash
# Install and Initialize
make install
make initdb
# Collect FLS Links
make collect

# Press `Ctrl+C` to stop the collection process.

# Analyze Threats and Privacy
make analyze-threats
make analyze-privacy

# Generate Report Figures
make report
# The output files will be saved in the `/figures` directory.
```

